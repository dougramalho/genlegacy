[{"id": "validateDocumentNumber_business_rule", "function_name": "validateDocumentNumber", "return_type": "bool", "content": "}\n\nbool validateDocumentNumber(const char* docNumber) {{\n\n    // Valida\u00e7\u00e3o simplificada de CNPJ\n    int len = strlen(docNumber);\n    if(len != 14) {\n        setLastError(\"Document number must have 14 digits\");\n        return false;\n    }\n    \n    // Verifica se s\u00e3o todos n\u00fameros\n    for(int i = 0; i < len; i++) {\n        if(docNumber[i] < '0' || docNumber[i] > '9') {\n            setLastError(\"Document number must contain only digits\");\n            return false;\n        }\n    }\n    \n    return true;\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern"}, {"id": "validateContractDates_business_rule", "function_name": "validateContractDates", "return_type": "bool", "content": "}\n\nbool validateContractDates(time_t startDate, time_t endDate) {{\n\n    // Verifica se a data final \u00e9 posterior \u00e0 data inicial\n    if(endDate <= startDate) {\n        setLastError(\"End date must be after start date\");\n        return false;\n    }\n    \n    // Verifica se a data inicial n\u00e3o \u00e9 passada\n    time_t now;\n    time(&now);\n    if(startDate < now) {\n        setLastError(\"Start date cannot be in the past\");\n        return false;\n    }\n    \n    return true;\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern"}, {"id": "validateContractValue_business_rule", "function_name": "validateContractValue", "return_type": "bool", "content": "}\n\nbool validateContractValue(double value) {{\n\n    if(value <= 0) {\n        setLastError(\"Contract value must be positive\");\n        return false;\n    }\n    \n    if(value < MIN_CONTRACT_VALUE) {\n        setLastError(\"Contract value below minimum allowed\");\n        return false;\n    }\n    \n    if(value > MAX_CONTRACT_VALUE) {\n        setLastError(\"Contract value above maximum allowed\");\n        return false;\n    }\n    \n    return true;\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern", "domain": "contract", "domain_attributes": ["contractvalue"]}, {"id": "validateEndorsement_business_rule", "function_name": "validateEndorsement", "return_type": "bool", "content": "}\n\nbool validateEndorsement(const Contract& contract, const Endorsement& endorsement) {{\n\n    if(!contract.active) {\n        setLastError(\"Cannot endorse inactive contract\");\n        return false;\n    }\n    \n    switch(endorsement.type) {\n        case 'I':  // Increase\n            if(contract.contractValue + endorsement.changeValue > MAX_CONTRACT_VALUE) {\n                setLastError(\"Endorsement would exceed maximum contract value\");\n                return false;\n            }\n            break;\n            \n        case 'D':  // Decrease\n            if(contract.contractValue - endorsement.changeValue < MIN_CONTRACT_VALUE) {\n                setLastError(\"Endorsement would result in contract value below minimum\");\n                return false;\n            }\n            break;\n            \n        case 'C':  // Cancel\n            // Sempre permite cancelamento\n            break;\n            \n        default:\n            setLastError(\"Invalid endorsement type\");\n            return false;\n    }\n    \n    return true;\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern", "domain": "contract", "domain_attributes": ["active", "contractvalue"]}, {"id": "calculatePremium_business_rule", "function_name": "calculatePremium", "return_type": "double", "content": "}\n\ndouble calculatePremium(const Contract& contract) {{\n\n    double totalPremium = 0.0;\n    \n    // Para cada cobertura no contrato\n    for(int i = 0; i < contract.coverageCount; i++) {\n        Coverage* coverage = findCoverage(contract.coverageIds[i]);\n        if(coverage && coverage->active) {\n            // Calcula o pr\u00eamio baseado na taxa da cobertura\n            totalPremium += contract.contractValue * coverage->premiumRate;\n        }\n    }\n    \n    // Aplica desconto por volume se aplic\u00e1vel\n    if(contract.contractValue > 1000000.0) {\n        totalPremium *= 0.95;  // 5% de desconto\n    }\n    \n    return totalPremium;\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern", "domain": "contract", "domain_attributes": ["coverageids", "active", "contractvalue", "coveragecount"]}, {"id": "saveContract_validation_rule", "function_name": "saveContract", "return_type": "bool", "content": "}\n\nbool saveContract(const Contract& contract) {{\n\n    // Valida\u00e7\u00f5es b\u00e1sicas\n    if(!validateContractValue(contract.contractValue)) {\n        return false;\n    }\n    \n    if(!validateContractDates(contract.startDate, contract.endDate)) {\n        return false;\n    }\n    \n    // Verifica se tomador existe\n    bool policyholderFound = false;\n    for(size_t i = 0; i < g_policyholders.size(); i++) {\n        if(g_policyholders[i].id == contract.policyHolderId) {\n            policyholderFound = true;\n            break;\n        }\n    }\n    \n    if(!policyholderFound) {\n        setLastError(\"Policyholder not found\");\n        return false;\n    }\n    \n    g_contracts.push_back(contract);\n    return true;\n}", "type": "validation", "confidence": "high", "source": "error_handling", "domain": "contract", "domain_attributes": ["contractvalue"], "description": "Valida e salva um contrato, verificando o valor do contrato, as datas e a exist\u00eancia do tomador.", "dependencies": ["validateContractValue", "validateContractDates"], "domain_objects": ["Contract", "Policyholder"], "business_impact": "Garante que apenas contratos v\u00e1lidos e com tomadores existentes sejam salvos, evitando inconsist\u00eancias no sistema.", "confidence_score": 0.95}, {"id": "saveEndorsement_validation_rule", "function_name": "saveEndorsement", "return_type": "bool", "content": "}\n\nbool saveEndorsement(const Endorsement& endorsement) {{\n\n    // Procura o contrato\n    Contract* contract = findContract(endorsement.contractNumber);\n    if(!contract) {\n        setLastError(\"Contract not found\");\n        return false;\n    }\n    \n    // Valida o endosso\n    if(!validateEndorsement(*contract, endorsement)) {\n        return false;\n    }\n    \n    g_endorsements.push_back(endorsement);\n    \n    // Atualiza o contrato se necess\u00e1rio\n    if(endorsement.type == 'I') {  // Increase\n        contract->contractValue += endorsement.changeValue;\n    } else if(endorsement.type == 'D') {  // Decrease\n        contract->contractValue -= endorsement.changeValue;\n    } else if(endorsement.type == 'C') {  // Cancel\n        contract->active = false;\n    }\n    \n    return true;\n}", "type": "validation", "confidence": "high", "source": "error_handling", "domain": "contract", "domain_attributes": ["active", "contractvalue"], "description": "Valida e salva um endosso, verificando a exist\u00eancia do contrato e atualizando o valor do contrato conforme o tipo de endosso.", "dependencies": ["validateEndorsement", "findContract"], "domain_objects": ["Endorsement", "Contract"], "business_impact": "Assegura que apenas endossos v\u00e1lidos sejam aplicados, mantendo a integridade dos contratos.", "confidence_score": 0.95}, {"id": "listContracts_domain_rule", "function_name": "listContracts", "return_type": "void", "content": "}\n\nvoid listContracts() {{\n\n    std::cout << \"\\n=== Contracts List ===\" << std::endl;\n    std::cout << std::setw(8) << \"Number\" << \" | \"\n              << std::setw(15) << \"Policy\" << \" | \"\n              << std::setw(10) << \"Value\" << \" | \"\n              << \"Status\" << std::endl;\n    std::cout << std::string(80, '-') << std::endl;\n    \n    for(size_t i = 0; i < g_contracts.size(); i++) {\n        std::cout << std::setw(8) << g_contracts[i].number << \" | \"\n                  << std::setw(15) << g_contracts[i].policyNumber << \" | \"\n                  << std::setw(10) << g_contracts[i].contractValue << \" | \"\n                  << (g_contracts[i].active ? \"Active\" : \"Inactive\") << std::endl;\n    }\n}", "type": "business_logic", "confidence": "high", "source": "domain_analysis", "domain": "contract", "domain_attributes": ["active", "contractvalue"], "description": "Lista todos os contratos, mostrando detalhes como n\u00famero, ap\u00f3lice, valor e status.", "dependencies": [], "domain_objects": ["Contract"], "business_impact": "Facilita a visualiza\u00e7\u00e3o e auditoria dos contratos ativos e inativos no sistema.", "confidence_score": 0.9}, {"id": "listEndorsements_domain_rule", "function_name": "listEndorsements", "return_type": "void", "content": "}\n\nvoid listEndorsements(int contractNumber) {{\n\n    std::cout << \"\\n=== Endorsements for Contract \" << contractNumber << \" ===\" << std::endl;\n    std::cout << std::setw(8) << \"Number\" << \" | \"\n              << std::setw(10) << \"Type\" << \" | \"\n              << std::setw(10) << \"Value\" << \" | \"\n              << \"Date\" << std::endl;\n    std::cout << std::string(80, '-') << std::endl;\n    \n    for(size_t i = 0; i < g_endorsements.size(); i++) {\n        if(g_endorsements[i].contractNumber == contractNumber) {\n            char typeDesc[20];\n            switch(g_endorsements[i].type) {\n                case 'I': strcpy(typeDesc, \"Increase\"); break;\n                case 'D': strcpy(typeDesc, \"Decrease\"); break;\n                case 'C': strcpy(typeDesc, \"Cancel\"); break;\n                default: strcpy(typeDesc, \"Unknown\");\n            }\n            \n            std::cout << std::setw(8) << g_endorsements[i].number << \" | \"\n                      << std::setw(10) << typeDesc << \" | \"\n                      << std::setw(10) << g_endorsements[i].changeValue << \" | \"\n                      << ctime(&g_endorsements[i].endorsementDate);\n        }\n    }\n}", "type": "business_logic", "confidence": "high", "source": "domain_analysis", "domain": "endorsement", "domain_attributes": ["changevalue", "type"], "description": "Lista todos os endossos de um contrato espec\u00edfico, mostrando detalhes como n\u00famero, tipo, valor e data.", "dependencies": [], "domain_objects": ["Endorsement"], "business_impact": "Permite a visualiza\u00e7\u00e3o detalhada dos endossos aplicados a um contrato, auxiliando na auditoria e gest\u00e3o.", "confidence_score": 0.9}, {"id": "main_validation_rule", "function_name": "main", "return_type": "int", "content": "}\n\nint main() {{\n\n    initializeSystem();\n    \n    while(1) {\n        showMainMenu();\n        int choice;\n        std::cin >> choice;\n        \n        switch(choice) {\n            case 1:\n                processPolicyholderMenu();\n                break;\n            case 2:\n                processContractMenu();\n                break;\n            case 3:\n                processEndorsementMenu();\n                break;\n            case 4:\n                processReportsMenu();\n                break;\n            case 0:\n                std::cout << \"Exiting system...\" << std::endl;\n                return 0;\n            default:\n                std::cout << \"Invalid option!\" << std::endl;\n        }\n    }\n    \n    return 0;\n}", "type": "validation_rule", "confidence": "low", "source": "error_handling"}, {"id": "processPolicyholderMenu_business_rule", "function_name": "processPolicyholderMenu", "return_type": "void", "content": "}\n\nvoid processPolicyholderMenu() {{\n\n    while(1) {\n        showPolicyholderMenu();\n        int choice;\n        cin >> choice;\n        \n        switch(choice) {\n            case 1: {\n                Policyholder newPolicyholder;\n                inputPolicyholder(newPolicyholder);\n                if(savePolicyholder(newPolicyholder)) {\n                    cout << \"Policyholder saved successfully!\" << endl;\n                } else {\n                    cout << \"Error: \" << getLastError() << endl;\n                }\n                break;\n            }\n            case 2:\n                listPolicyholders();\n                break;\n            case 3: {\n                int id;\n                cout << \"Enter Policyholder ID: \";\n                cin >> id;\n                Policyholder* found = findPolicyholder(id);\n                if(found) {\n                    displayPolicyholder(*found);\n                } else {\n                    cout << \"Policyholder not found!\" << endl;\n                }\n                break;\n            }\n            case 0:\n                return;\n            default:\n                cout << \"Invalid option!\" << endl;\n        }\n        \n        cout << \"\\nPress Enter to continue...\";\n        cin.ignore();\n        cin.get();\n    }\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern"}, {"id": "processContractMenu_business_rule", "function_name": "processContractMenu", "return_type": "void", "content": "}\n\nvoid processContractMenu() {{\n\n    while(1) {\n        showContractMenu();\n        int choice;\n        cin >> choice;\n        \n        switch(choice) {\n            case 1: {\n                Contract newContract;\n                inputContract(newContract);\n                if(saveContract(newContract)) {\n                    cout << \"Contract saved successfully!\" << endl;\n                } else {\n                    cout << \"Error: \" << getLastError() << endl;\n                }\n                break;\n            }\n            case 2:\n                listContracts();\n                break;\n            case 3: {\n                int number;\n                cout << \"Enter Contract Number: \";\n                cin >> number;\n                Contract* found = findContract(number);\n                if(found) {\n                    displayContract(*found);\n                } else {\n                    cout << \"Contract not found!\" << endl;\n                }\n                break;\n            }\n            case 0:\n                return;\n            default:\n                cout << \"Invalid option!\" << endl;\n        }\n        \n        cout << \"\\nPress Enter to continue...\";\n        cin.ignore();\n        cin.get();\n    }\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern"}, {"id": "processEndorsementMenu_business_rule", "function_name": "processEndorsementMenu", "return_type": "void", "content": "}\n\nvoid processEndorsementMenu() {{\n\n    while(1) {\n        showEndorsementMenu();\n        int choice;\n        cin >> choice;\n        \n        switch(choice) {\n            case 1: {\n                Endorsement newEndorsement;\n                inputEndorsement(newEndorsement);\n                if(saveEndorsement(newEndorsement)) {\n                    cout << \"Endorsement saved successfully!\" << endl;\n                } else {\n                    cout << \"Error: \" << getLastError() << endl;\n                }\n                break;\n            }\n            case 2: {\n                int contractNumber;\n                cout << \"Enter Contract Number: \";\n                cin >> contractNumber;\n                listEndorsements(contractNumber);\n                break;\n            }\n            case 0:\n                return;\n            default:\n                cout << \"Invalid option!\" << endl;\n        }\n        \n        cout << \"\\nPress Enter to continue...\";\n        cin.ignore();\n        cin.get();\n    }\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern"}, {"id": "processReportsMenu_business_rule", "function_name": "processReportsMenu", "return_type": "void", "content": "}\n\nvoid processReportsMenu() {{\n\n    while(1) {\n        showReportsMenu();\n        int choice;\n        cin >> choice;\n        \n        switch(choice) {\n            case 1:\n                reportActiveContracts();\n                break;\n            case 2:\n                reportPremiumByPolicyholder();\n                break;\n            case 3:\n                reportEndorsementsHistory();\n                break;\n            case 0:\n                return;\n            default:\n                cout << \"Invalid option!\" << endl;\n        }\n        \n        cout << \"\\nPress Enter to continue...\";\n        cin.ignore();\n        cin.get();\n    }\n}", "type": "business_rule", "confidence": "high", "source": "name_pattern", "domain": "contract", "domain_attributes": ["active"]}, {"id": "inputPolicyholder_validation_rule", "function_name": "inputPolicyholder", "return_type": "void", "content": "}\n\nvoid inputPolicyholder(Policyholder& policyholder) {{\n\n    policyholder.id = g_policyholders.size() + 1;  // Identificador sequencial\n    policyholder.active = true;\n    time(&policyholder.registrationDate);\n\n    cin.ignore();\n    cout << \"Name: \";\n    cin.getline(policyholder.name, MAX_NAME_LENGTH);\n    \n    cout << \"Document Number (CNPJ): \";\n    cin.getline(policyholder.documentNumber, MAX_DOC_LENGTH);\n    \n    if(!validateDocumentNumber(policyholder.documentNumber)) {\n        setLastError(\"Invalid document number format\");\n        return;\n    }\n    \n    cout << \"Address:\\n\";\n    cout << \"Street: \";\n    cin.getline(policyholder.address.street, 100);\n    \n    cout << \"Number: \";\n    cin.getline(policyholder.address.number, 20);\n    \n    cout << \"City: \";\n    cin.getline(policyholder.address.city, 50);\n    \n    cout << \"State (2 letters): \";\n    cin.getline(policyholder.address.state, 3);\n    \n    cout << \"ZIP Code: \";\n    cin.getline(policyholder.address.zipCode, 10);\n    \n    cout << \"Phone: \";\n    cin.getline(policyholder.phone, 15);\n}", "type": "validation", "confidence": "high", "source": "error_handling", "description": "Coleta e valida as informa\u00e7\u00f5es de um tomador, incluindo nome, documento e endere\u00e7o.", "dependencies": ["validateDocumentNumber"], "domain_objects": ["Policyholder"], "business_impact": "Garante que apenas tomadores com informa\u00e7\u00f5es v\u00e1lidas sejam registrados no sistema.", "confidence_score": 0.95}, {"id": "inputContract_validation_rule", "function_name": "inputContract", "return_type": "void", "content": "}\n\nvoid inputContract(Contract& contract) {{\n\n    contract.number = g_contracts.size() + 1;\n    contract.active = true;\n    time(&contract.issueDate);\n    contract.coverageCount = 0;\n\n    cout << \"\\n=== New Contract ===\" << endl;\n    \n    cout << \"Policyholder ID: \";\n    cin >> contract.policyHolderId;\n    \n    if(!findPolicyholder(contract.policyHolderId)) {\n        setLastError(\"Invalid policyholder ID\");\n        return;\n    }\n\n    cout << \"Contract Value: \";\n    cin >> contract.contractValue;\n    \n    if(!validateContractValue(contract.contractValue)) {\n        return;  // Error message already set by validate function\n    }\n\n    // Input dates\n    int year, month, day;\n    cout << \"\\nStart Date (YYYY MM DD): \";\n    cin >> year >> month >> day;\n    \n    struct tm startTm = {0};\n    startTm.tm_year = year - 1900;\n    startTm.tm_mon = month - 1;\n    startTm.tm_mday = day;\n    contract.startDate = mktime(&startTm);\n    \n    cout << \"End Date (YYYY MM DD): \";\n    cin >> year >> month >> day;\n    \n    struct tm endTm = {0};\n    endTm.tm_year = year - 1900;\n    endTm.tm_mon = month - 1;\n    endTm.tm_mday = day;\n    contract.endDate = mktime(&endTm);\n\n    if(!validateContractDates(contract.startDate, contract.endDate)) {\n        return;  // Error message already set by validate function\n    }\n\n    // Input coverages\n    cout << \"\\nAvailable Coverages:\" << endl;\n    for(const auto& cov : g_coverages) {\n        if(cov.active) {\n            cout << cov.id << \". \" << cov.name \n                 << \" (Rate: \" << cov.premiumRate * 100 << \"%)\" << endl;\n        }\n    }\n\n    cout << \"\\nHow many coverages to add? \";\n    int numCoverages;\n    cin >> numCoverages;\n\n    for(int i = 0; i < numCoverages && i < MAX_COVERAGES; i++) {\n        cout << \"Enter coverage ID \" << (i+1) << \": \";\n        int covId;\n        cin >> covId;\n        \n        if(findCoverage(covId)) {\n            contract.coverageIds[contract.coverageCount++] = covId;\n        } else {\n            cout << \"Invalid coverage ID, skipping...\" << endl;\n        }\n    }\n\n    if(contract.coverageCount == 0) {\n        setLastError(\"Contract must have at least one coverage\");\n        return;\n    }\n\n    // Calculate premium\n    contract.premium = calculatePremium(contract);\n    \n    // Generate policy number\n    generatePolicyNumber(contract.policyNumber, contract.number);\n}", "type": "validation", "confidence": "high", "source": "error_handling", "domain": "contract", "domain_attributes": ["coverageids", "active", "contractvalue", "coveragecount"], "description": "Coleta e valida as informa\u00e7\u00f5es de um contrato, incluindo tomador, valor, datas e coberturas.", "dependencies": ["validateContractValue", "validateContractDates", "findPolicyholder"], "domain_objects": ["Contract"], "business_impact": "Assegura que apenas contratos com informa\u00e7\u00f5es completas e v\u00e1lidas sejam criados.", "confidence_score": 0.95}, {"id": "inputEndorsement_validation_rule", "function_name": "inputEndorsement", "return_type": "void", "content": "}\n\nvoid inputEndorsement(Endorsement& endorsement) {{\n\n    endorsement.number = g_endorsements.size() + 1;\n    time(&endorsement.endorsementDate);\n\n    cout << \"\\n=== New Endorsement ===\" << endl;\n    \n    cout << \"Contract Number: \";\n    cin >> endorsement.contractNumber;\n    \n    Contract* contract = findContract(endorsement.contractNumber);\n    if(!contract) {\n        setLastError(\"Contract not found\");\n        return;\n    }\n    \n    if(!contract->active) {\n        setLastError(\"Cannot endorse inactive contract\");\n        return;\n    }\n\n    cout << \"\\nCurrent Contract Value: $\" << contract->contractValue << endl;\n    \n    cout << \"Endorsement Type (I=Increase, D=Decrease, C=Cancel): \";\n    cin >> endorsement.type;\n    endorsement.type = toupper(endorsement.type);\n    \n    if(endorsement.type != 'I' && endorsement.type != 'D' && endorsement.type != 'C') {\n        setLastError(\"Invalid endorsement type\");\n        return;\n    }\n\n    if(endorsement.type != 'C') {\n        cout << \"Change Value: $\";\n        cin >> endorsement.changeValue;\n    } else {\n        endorsement.changeValue = 0;\n    }\n\n    cin.ignore();\n    cout << \"Description: \";\n    cin.getline(endorsement.description, sizeof(endorsement.description));\n}", "type": "validation", "confidence": "high", "source": "error_handling", "domain": "contract", "domain_attributes": ["active", "contractvalue"], "description": "Coleta e valida as informa\u00e7\u00f5es de um endosso, incluindo tipo e valor de altera\u00e7\u00e3o.", "dependencies": ["findContract"], "domain_objects": ["Endorsement"], "business_impact": "Garante que apenas endossos v\u00e1lidos sejam registrados, evitando altera\u00e7\u00f5es incorretas nos contratos.", "confidence_score": 0.95}, {"id": "showReportsMenu_calculation_rule", "function_name": "showReportsMenu", "return_type": "void", "content": "}\n\nvoid showReportsMenu() {{\n\n    cout << \"\\n=== REPORTS MENU ===\" << endl;\n    cout << \"1. Active Contracts Summary\" << endl;\n    cout << \"2. Premium by Policyholder\" << endl;\n    cout << \"3. Endorsements History\" << endl;\n    cout << \"0. Back to Main Menu\" << endl;\n    cout << \"\\nChoice: \";\n}", "type": "calculation_rule", "confidence": "low", "source": "calculation_pattern", "domain": "contract", "domain_attributes": ["active"]}, {"id": "reportActiveContracts_calculation_rule", "function_name": "reportActiveContracts", "return_type": "void", "content": "}\n\nvoid reportActiveContracts() {{\n\n    cout << \"\\n=== Active Contracts Summary ===\" << endl;\n    cout << setfill('=') << setw(80) << \"=\" << setfill(' ') << endl;\n    cout << setw(10) << \"Number\" << \" | \"\n         << setw(15) << \"Policy\" << \" | \"\n         << setw(15) << \"Value\" << \" | \"\n         << setw(15) << \"Premium\" << \" | \"\n         << \"Policyholder\" << endl;\n    cout << setfill('-') << setw(80) << \"-\" << setfill(' ') << endl;\n    \n    double totalValue = 0.0;\n    double totalPremium = 0.0;\n    int activeCount = 0;\n    \n    for(const auto& contract : g_contracts) {\n        if(contract.active) {\n            Policyholder* ph = findPolicyholder(contract.policyHolderId);\n            cout << setw(10) << contract.number << \" | \"\n                 << setw(15) << contract.policyNumber << \" | \"\n                 << setw(15) << fixed << setprecision(2) << contract.contractValue << \" | \"\n                 << setw(15) << contract.premium << \" | \"\n                 << (ph ? ph->name : \"Unknown\") << endl;\n                 \n            totalValue += contract.contractValue;\n            totalPremium += contract.premium;\n            activeCount++;\n        }\n    }\n    \n    cout << setfill('=') << setw(80) << \"=\" << setfill(' ') << endl;\n    cout << \"Total Active Contracts: \" << activeCount << endl;\n    cout << \"Total Value: $\" << fixed << setprecision(2) << totalValue << endl;\n    cout << \"Total Premium: $\" << totalPremium << endl;\n}", "type": "calculation", "confidence": "high", "source": "calculation_pattern", "domain": "contract", "domain_attributes": ["active", "contractvalue"], "description": "Gera um resumo dos contratos ativos, incluindo n\u00famero, ap\u00f3lice, valor e pr\u00eamio.", "dependencies": ["findPolicyholder"], "domain_objects": ["Contract"], "business_impact": "Fornece uma vis\u00e3o geral dos contratos ativos, auxiliando na gest\u00e3o e an\u00e1lise financeira.", "confidence_score": 0.9}, {"id": "reportPremiumByPolicyholder_calculation_rule", "function_name": "reportPremiumByPolicyholder", "return_type": "void", "content": "}\n\nvoid reportPremiumByPolicyholder() {{\n\n    cout << \"\\n=== Premium by Policyholder ===\" << endl;\n    cout << setfill('=') << setw(80) << \"=\" << setfill(' ') << endl;\n    cout << setw(40) << \"Policyholder\" << \" | \"\n         << setw(10) << \"Contracts\" << \" | \"\n         << setw(15) << \"Total Value\" << \" | \"\n         << \"Total Premium\" << endl;\n    cout << setfill('-') << setw(80) << \"-\" << setfill(' ') << endl;\n    \n    for(const auto& ph : g_policyholders) {\n        int contractCount = 0;\n        double totalValue = 0.0;\n        double totalPremium = 0.0;\n        \n        // Soma contratos do tomador\n        for(const auto& contract : g_contracts) {\n            if(contract.policyHolderId == ph.id && contract.active) {\n                contractCount++;\n                totalValue += contract.contractValue;\n                totalPremium += contract.premium;\n            }\n        }\n        \n        if(contractCount > 0) {\n            cout << setw(40) << ph.name << \" | \"\n                 << setw(10) << contractCount << \" | \"\n                 << setw(15) << fixed << setprecision(2) << totalValue << \" | \"\n                 << totalPremium << endl;\n        }\n    }\n}", "type": "calculation", "confidence": "high", "source": "calculation_pattern", "domain": "contract", "domain_attributes": ["active", "contractvalue"], "description": "Gera um relat\u00f3rio de pr\u00eamios por tomador, mostrando o n\u00famero de contratos, valor total e pr\u00eamio total.", "dependencies": [], "domain_objects": ["Policyholder", "Contract"], "business_impact": "Permite a an\u00e1lise do desempenho financeiro por tomador, auxiliando na tomada de decis\u00f5es estrat\u00e9gicas.", "confidence_score": 0.9}, {"id": "displayContract_domain_rule", "function_name": "displayContract", "return_type": "void", "content": "}\n\nvoid displayContract(const Contract& c) {{\n\n    cout << \"\\n=== Contract Details ===\" << endl;\n    cout << \"Number: \" << c.number << endl;\n    cout << \"Policy Number: \" << c.policyNumber << endl;\n    \n    Policyholder* ph = findPolicyholder(c.policyHolderId);\n    if(ph) {\n        cout << \"Policyholder: \" << ph->name << endl;\n    }\n    \n    cout << \"Value: $\" << fixed << setprecision(2) << c.contractValue << endl;\n    cout << \"Premium: $\" << c.premium << endl;\n    \n    char buffer[26];\n    ctime_s(buffer, sizeof(buffer), &c.startDate);\n    cout << \"Start Date: \" << buffer;\n    ctime_s(buffer, sizeof(buffer), &c.endDate);\n    cout << \"End Date: \" << buffer;\n    \n    cout << \"Status: \" << (c.active ? \"Active\" : \"Inactive\") << endl;\n    \n    cout << \"\\nCoverages:\" << endl;\n    for(int i = 0; i < c.coverageCount; i++) {\n        Coverage* cov = findCoverage(c.coverageIds[i]);\n        if(cov) {\n            cout << \"- \" << cov->name << endl;\n        }\n    }\n}", "type": "business_logic", "confidence": "high", "source": "domain_analysis", "domain": "contract", "domain_attributes": ["coverageids", "active", "contractvalue", "coveragecount"], "description": "Exibe os detalhes de um contrato espec\u00edfico, incluindo n\u00famero, ap\u00f3lice, tomador, valor, pr\u00eamio, datas e coberturas.", "dependencies": ["findPolicyholder", "findCoverage"], "domain_objects": ["Contract"], "business_impact": "Facilita a visualiza\u00e7\u00e3o detalhada de um contrato, auxiliando na auditoria e gest\u00e3o.", "confidence_score": 0.9}, {"id": "displayEndorsement_domain_rule", "function_name": "displayEndorsement", "return_type": "void", "content": "}\n\nvoid displayEndorsement(const Endorsement& e) {{\n\n    cout << \"\\n=== Endorsement Details ===\" << endl;\n    cout << \"Number: \" << e.number << endl;\n    cout << \"Contract Number: \" << e.contractNumber << endl;\n    \n    char typeDesc[20];\n    switch(e.type) {\n        case 'I': strcpy(typeDesc, \"Increase\"); break;\n        case 'D': strcpy(typeDesc, \"Decrease\"); break;\n        case 'C': strcpy(typeDesc, \"Cancellation\"); break;\n        default: strcpy(typeDesc, \"Unknown\");\n    }\n    \n    cout << \"Type: \" << typeDesc << endl;\n    \n    if(e.type != 'C') {\n        cout << \"Change Value: $\" << fixed << setprecision(2) << e.changeValue << endl;\n    }\n    \n    char buffer[26];\n    ctime_s(buffer, sizeof(buffer), &e.endorsementDate);\n    cout << \"Date: \" << buffer;\n    \n    cout << \"Description: \" << e.description << endl;\n}", "type": "business_logic", "confidence": "high", "source": "domain_analysis", "domain": "endorsement", "domain_attributes": ["changevalue", "type"], "description": "Exibe os detalhes de um endosso espec\u00edfico, incluindo n\u00famero, tipo, valor de altera\u00e7\u00e3o, data e descri\u00e7\u00e3o.", "dependencies": [], "domain_objects": ["Endorsement"], "business_impact": "Permite a visualiza\u00e7\u00e3o detalhada de um endosso, auxiliando na auditoria e gest\u00e3o.", "confidence_score": 0.9}, {"id": "reportEndorsementsHistory_domain_rule", "function_name": "reportEndorsementsHistory", "return_type": "void", "content": "}\n\nvoid reportEndorsementsHistory() {{\n\n    cout << \"\\n=== Endorsements History ===\" << endl;\n    cout << setfill('=') << setw(80) << \"=\" << setfill(' ') << endl;\n    \n    for(const auto& contract : g_contracts) {\n        bool hasEndorsements = false;\n        \n        // Verifica se contrato tem endossos antes de imprimir cabe\u00e7alho\n        for(const auto& end : g_endorsements) {\n            if(end.contractNumber == contract.number) {\n                if(!hasEndorsements) {\n                    cout << \"\\nContract: \" << contract.number \n                         << \" (Policy: \" << contract.policyNumber << \")\" << endl;\n                    cout << setfill('-') << setw(60) << \"-\" << setfill(' ') << endl;\n                    hasEndorsements = true;\n                }\n                \n                char typeDesc[20];\n                switch(end.type) {\n                    case 'I': strcpy(typeDesc, \"Increase\"); break;\n                    case 'D': strcpy(typeDesc, \"Decrease\"); break;\n                    case 'C': strcpy(typeDesc, \"Cancel\"); break;\n                    default: strcpy(typeDesc, \"Unknown\");\n                }\n                \n                char dateStr[26];\n                ctime_s(dateStr, sizeof(dateStr), &end.endorsementDate);\n                dateStr[24] = '\\0';  // Remove newline\n                \n                cout << dateStr << \" - \" << typeDesc;\n                if(end.type != 'C') {\n                    cout << \" $\" << fixed << setprecision(2) << end.changeValue;\n                }\n                cout << endl;\n                cout << \"Description: \" << end.description << endl;\n            }\n        }\n        \n        if(hasEndorsements) {\n            cout << setfill('-') << setw(60) << \"-\" << setfill(' ') << endl;\n        }\n    }\n}", "type": "business_logic", "confidence": "high", "source": "domain_analysis", "domain": "endorsement", "domain_attributes": ["changevalue", "type"], "description": "Gera um hist\u00f3rico de endossos para todos os contratos, mostrando detalhes como data, tipo e descri\u00e7\u00e3o.", "dependencies": [], "domain_objects": ["Endorsement", "Contract"], "business_impact": "Fornece um hist\u00f3rico detalhado de endossos, auxiliando na auditoria e an\u00e1lise de altera\u00e7\u00f5es nos contratos.", "confidence_score": 0.9}]